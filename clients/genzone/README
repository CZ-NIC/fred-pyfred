README file for client of zone generator
----------------------------------------

Content:
    1. Introduction
    2. Description of files
    3. Configuration
    4. How to run the client


1. Introduction

genzone is client-side of zone generator. It communicates with server-side
through CORBA calls. The interface is described elsewhere and is not part
of this program. For description of communication protocol in more depth
see README.genzone in server's directory. The client is responsible for
formatting of received data in manner which is acceptable by DNS server.
The only currently availabel output format is a format of BIND DNS server.


2. Description of files

In alpabetical order:
    genzone_client.py - A script implementing client-side of zone generator.
    genzones.sh       - A script automating zone generation.
    skels             - Examples of additional configuration files influencing
                        operation of genzones.sh. These files are described
                        in Configuration section of this README.


3. Configuration

This section is about configuration of genzones.sh, which automates zone
generation and is ment to be run most of the time from cron. The script
is configurable by env variables, which are expected to be found in
/etc/default/genzones file (the example of this file is in directory skels).
The most important envs are:

    ZONES: defines zone names for which will be generated zone files
    GENZONE_COMMAND: command which executes genzone_client.py
    NAMESERVER_RESTART_COMMAND: command which restarts BIND DNS server

For detailes of zone file generation, zone file backups and zone disclaimer
see a source code of the script.


4. How to run the client

If CORBA nameservice is located at localhost and we want to generate zone file
for tld cz, we run following commands in this directory:

    $ cd ../../share && make build
    $ cd -
    $ python genzone_client.py --ns localhost cz

The "make build" will generate static IDL stubs. The zone is generated to
stdout. For client installation use Makefile in 'share' directory.

